#!/usr/bin/env php
<?php

use SprykerSdk\Aop\Console\AppConfigurationCreateConsole;
use SprykerSdk\Aop\Console\AppConfigurationValidateConsole;
use SprykerSdk\Aop\Console\AppManifestCreateConsole;
use SprykerSdk\Aop\Console\AppManifestValidateConsole;
use SprykerSdk\Aop\Console\AppTranslationCreateConsole;
use SprykerSdk\Aop\Console\AppTranslationValidateConsole;
use SprykerSdk\Aop\Console\CheckReadinessConsole;
use SprykerSdk\Aop\Console\ValidateConsole;
use Symfony\Component\Console\Application;

foreach ([__DIR__ . '/../vendor/autoload.php', __DIR__ . '/../../../autoload.php'] as $file) {
    if (file_exists($file)) {
        define('COMPOSER_INSTALL', $file);
        define('ROOT_DIR', realpath(dirname($file) . '/..'));
        break;
    }
}

unset($file);

if (!defined('COMPOSER_INSTALL')) {
    throw new \Exception('Could not resolve path to vendor/autoload.php');
}

require_once COMPOSER_INSTALL;

$application = new Application();
$application->addCommands([
    new ValidateConsole(),
    new AppManifestValidateConsole(),
    new AppConfigurationCreateConsole(),
    new AppConfigurationValidateConsole(),
    new AppTranslationValidateConsole(),
    new CheckReadinessConsole(),
    new AppManifestCreateConsole(),
    new AppTranslationCreateConsole(),
]);

$application->run();
